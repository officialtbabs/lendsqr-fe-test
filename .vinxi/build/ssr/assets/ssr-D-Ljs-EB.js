import{RouterProvider as E,createRootRoute as O,Outlet as H,HeadContent as I,Scripts as M,createFileRoute as l,lazyRouteComponent as h,createRouter as U}from"@tanstack/react-router";import{jsx as c,jsxs as S}from"react/jsx-runtime";import{QueryClient as A,QueryClientProvider as D}from"@tanstack/react-query";import{isPlainObject as G,encode as N,isRedirect as W,isNotFound as k}from"@tanstack/router-core";import{startSerializer as u,mergeHeaders as C,createServerFn as w}from"@tanstack/start-client-core";import{defineHandlerCallback as z,transformReadableStreamWithRouter as J,transformPipeableStreamWithRouter as Q,getHeaders as L,getEvent as B,createStartHandler as X}from"@tanstack/start-server-core";import Z from"tiny-invariant";import{PassThrough as K}from"node:stream";import{isbot as $}from"isbot";import m from"react-dom/server";function v(e){return c(E,{router:e.router})}const V=z(async({request:e,router:t,responseHeaders:n})=>{if(typeof m.renderToReadableStream=="function"){const s=await m.renderToReadableStream(c(v,{router:t}),{signal:e.signal});$(e.headers.get("User-Agent"))&&await s.allReady;const o=J(t,s);return new Response(o,{status:t.state.statusCode,headers:n})}if(typeof m.renderToPipeableStream=="function"){const s=new K;try{const a=m.renderToPipeableStream(c(v,{router:t}),{...$(e.headers.get("User-Agent"))?{onAllReady(){a.pipe(s)}}:{onShellReady(){a.pipe(s)}},onError:(d,r)=>{console.error("Error in renderToPipeableStream:",d,r)}})}catch(a){console.error("Error in renderToPipeableStream:",a)}const o=Q(t,s);return new Response(o,{status:t.state.statusCode,headers:n})}throw new Error("No renderToReadableStream or renderToPipeableStream found in react-dom/server. Ensure you are using a version of react-dom that supports streaming.")}),Y=()=>({routes:{__root__:{filePath:"__root.tsx",children:["/","/customers","/login"],preloads:["/_build/assets/client-s_GsO-RP.js","/_build/assets/client-C8-8zTWZ.js"]},"/":{filePath:"index.tsx"},"/customers":{filePath:"customers.tsx",children:["/customers/users/$userId","/customers/users/"]},"/login":{filePath:"login.tsx"},"/customers/users/$userId":{filePath:"customers/users/$userId.tsx",parent:"/customers"},"/customers/users/":{filePath:"customers/users/index.tsx",parent:"/customers"}}});function q(e){return globalThis.MANIFEST[e]}function ee(){const e=Y(),t=e.routes.__root__=e.routes.__root__||{};t.assets=t.assets||[];let n="";const s=q("client"),o=s.inputs[s.handler]?.output.path;return o||Z(o,"Could not find client entry in vinxi manifest"),t.assets.push({tag:"script",attrs:{type:"module",suppressHydrationWarning:!0,async:!0},children:`${n}import("${o}")`}),e}function te(){const e=ee();return{...e,routes:Object.fromEntries(Object.entries(e.routes).map(([t,n])=>{const{preloads:s,assets:o}=n;return[t,{preloads:s,assets:o}]}))}}const re="/_build/assets/defaultStyles-JvAT5Qo4.css",se="/_build/assets/globalStyles-CmekQS9-.css",f=O({head:()=>({meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{title:"Lendsqr Test"}],links:[{rel:"stylesheet",href:re},{rel:"stylesheet",href:se}]}),component:oe});function oe(){return c(ne,{children:c(H,{})})}function ne({children:e}){const t=new A;return S("html",{children:[c("head",{children:c(I,{})}),S("body",{children:[c(D,{client:t,children:e}),c(M,{})]})]})}const ae=()=>import("./login-CYS27opq.js"),P=l("/login")({component:h(ae,"component",()=>P.ssr)}),ie=l("/customers")({});async function ce(e,t,n){var s;const o=t[0];if(G(o)&&o.method){const r=o,p=r.data instanceof FormData?"formData":"payload",R=new Headers({...p==="payload"?{"content-type":"application/json",accept:"application/json"}:{},...r.headers instanceof Headers?Object.fromEntries(r.headers.entries()):r.headers});if(r.method==="GET"){const i=N({payload:u.stringify({data:r.data,context:r.context})});i&&(e.includes("?")?e+=`&${i}`:e+=`?${i}`)}e.includes("?")?e+="&createServerFn":e+="?createServerFn",r.response==="raw"&&(e+="&raw");const j=await n(e,{method:r.method,headers:R,signal:r.signal,...de(r)}),_=await b(j);if((s=_.headers.get("content-type"))!=null&&s.includes("application/json")){const i=u.decode(await _.json());if(W(i)||k(i)||i instanceof Error)throw i;return i}return _}const a=await b(await n(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})),d=a.headers.get("content-type");return d&&d.includes("application/json")?u.decode(await a.json()):a.text()}function de(e){return e.method==="POST"?e.data instanceof FormData?(e.data.set("__TSR_CONTEXT",u.stringify(e.context)),{body:e.data}):{body:u.stringify({data:e.data??null,context:e.context})}:{}}async function b(e){if(!e.ok){const t=e.headers.get("content-type");throw t&&t.includes("application/json")?u.decode(await e.json()):new Error(await e.text())}return e}function ue(e){return e.replace(/^\/|\/$/g,"")}const g=(e,t)=>{const n=`/${ue(t)}/${e}`;return Object.assign((...o)=>ce(n,o,async(a,d)=>{d.headers=C(L(),d.headers);const r=await $fetch.native(a,d),p=B(),R=C(r.headers,p.___ssrRpcResponseHeaders);return p.___ssrRpcResponseHeaders=R,r}),{url:n,functionId:e})},le=()=>import("./index-Jf4VeJS4.js"),pe=g("src_routes_index_tsx--getCount_createServerFn_handler","/_server"),me=w({method:"GET"}).handler(pe);g("src_routes_index_tsx--updateCount_createServerFn_handler","/_server");const T=l("/")({component:h(le,"component",()=>T.ssr),loader:async()=>await me()}),he=g("src_apis_users_ts--getUsersFn_createServerFn_handler","/_server"),fe=w({method:"GET"}).validator(e=>e).handler(he),Re=()=>import("./index-BK-_22lQ.js"),x=l("/customers/users/")({loader:()=>fe({data:{page:1}}),component:h(Re,"component",()=>x.ssr)}),_e=()=>import("./_userId-rBvWWJkY.js"),F=l("/customers/users/$userId")({component:h(_e,"component",()=>F.ssr)}),ge=P.update({id:"/login",path:"/login",getParentRoute:()=>f}),y=ie.update({id:"/customers",path:"/customers",getParentRoute:()=>f}),ye=T.update({id:"/",path:"/",getParentRoute:()=>f}),Se=x.update({id:"/users/",path:"/users/",getParentRoute:()=>y}),Ce=F.update({id:"/users/$userId",path:"/users/$userId",getParentRoute:()=>y}),$e={CustomersUsersUserIdRoute:Ce,CustomersUsersIndexRoute:Se},ve=y._addFileChildren($e),be={IndexRoute:ye,CustomersRoute:ve,LoginRoute:ge},we=f._addFileChildren(be)._addFileTypes();function Pe(){return U({routeTree:we,scrollRestoration:!0})}const Ae=X({createRouter:Pe,getRouterManifest:te})(V);export{T as R,x as a,g as c,Ae as h};
